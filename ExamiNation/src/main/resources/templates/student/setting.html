<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{fragments/head :: headTag(title='Setting')}"></head>

    <body>
        <!-- Use the fragment and pass HTML as 'content' -->
        <div th:replace="~{fragments/student-layout :: studentPageLayout(content=~{:: #myStudentContent}, active='setting')}"></div>

        <!-- Define the HTML block to pass -->
        <div style="display: none">
            <main id="myStudentContent">
                <h1 class="text-3xl">My Profile</h1>
                <section class="border w-1/2 mx-auto p-8 rounded-lg shadow-md">
   
                  <form th:action="@{/setting/profile/update}" method="post">
                    <h3 class="text-lg font-semibold mb-6">Manage Account</h3>
                    
                    <label for="fullName" class="block text-sm font-medium text-gray-700">Full Name:</label>
                    <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40" th:value="${user.fullName}"/>
                
                    <label for="email" class="block text-sm font-medium text-gray-700 mt-4">Email:</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40" th:value="${user.email}"/>
                
                    <label for="username" class="block text-sm font-medium text-gray-700 mt-4">Username:</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40" th:value="${user.username}"/>
                
                    <label for="role" class="block text-sm font-medium text-gray-700 mt-4">Role:</label>
                    <input type="text" id="role" th:value="${user.role}" disabled class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-700"/>
                
                    <label for="dateJoined" class="block text-sm font-medium text-gray-700 mt-4">Date Joined:</label>
                    <input type="text" id="dateJoined" th:value="${user.dateJoined}" disabled class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 text-gray-700"/>
                
                    <div class="mt-4 text-end">
                        <span href="#" onclick="document.getElementById('changePasswordModal').style.display='block';" class="text-blue-600 hover:underline cursor-pointer">Change Password</span>
                    </div>
                
                    <div class="flex justify-between mt-6">
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 focus:ring-4 ring-blue-400">Save changes</button>
                    </div>
                </form>
                
              </section>
              
              <!-- Change Password Modal -->
              <div id="changePasswordModal" class="fixed inset-0 bg-black bg-opacity-50" style="display: none;">
                  <div class="absolute inset-0 flex items-center justify-center">
                      <form th:action="@{/setting/password/update}" method="post" class="mx-auto mt-8 p-4 border rounded-lg shadow-md bg-white w-1/3">
                          <h3 class="text-lg mb-4">Change Password</h3>
                          
                          <label for="oldPassword" class="block text-sm font-medium text-gray-700">Old Password:</label>
                          <input type="password" id="oldPassword" name="oldPassword" placeholder="Enter your old password" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"/>
              
                          <label for="newPassword" class="block text-sm font-medium text-gray-700 mt-4">New Password:</label>
                          <input type="password" id="newPassword" name="newPassword" placeholder="Enter your new password" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"/>
              
                          <label for="confirmNewPassword" class="block text-sm font-medium text-gray-700 mt-4">Confirm New Password:</label>
                          <input type="password" id="confirmNewPassword" name="confirmNewPassword" placeholder="Confirm your new password" class="block mt-2 w-full placeholder-gray-400/70 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"/>
              
                          <div class="flex justify-between mt-6">
                              <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 focus:ring-4 ring-blue-400">Change</button>
                              <button type="button" onclick="document.getElementById('changePasswordModal').style.display='none';" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-500 focus:ring-4 ring-red-400">Cancel</button>
                          </div>
                      </form>
                  </div>
              </div>
            
            </main>
        </div>
    </body>
</html>
